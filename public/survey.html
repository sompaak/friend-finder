<!DOCTYPE html>
<html>
<head>
	<title></title>

	<script
		src="https://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous">  	
	</script>
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


	<link rel="stylesheet" type="text/css" href="../assets/css/style.css">

  
    <!-- Latest compiled and minified JavaScript -->
	<script 
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
		integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
		crossorigin="anonymous">
	</script>

</head>

<body>

	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">
			<div class="jumbotron">
				<form>
				    <div class="form-group">
				      <label for="usr">Name:</label>
				      <input type="text" class="form-control" id="name">
				    </div>
				    <div class="form-group">
				      <label for="pwd">image:</label>
				      <input type="text" class="form-control" id="img">
				    </div>
				</form>
			</div>
			<div class="jumbotron">
			 
			   Your mind is always buzzing with unexplored ideas and plans.
			   <br>
				<select class="chosen-select" id="q1">
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>
	
	</script>
	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">

			<div class="jumbotron">
			 
			    Generally speaking, you rely more on your experience than your imagination.
			    <br>

			    <select class="chosen-select" id="q2">
			    <br>
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">

			<div class="jumbotron">
			 You find it easy to stay relaxed and focused even when there is some pressure.
			 <br>
			 <select class="chosen-select" id="q3">
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">

			<div class="jumbotron">
			 
			   You rarely do something just out of sheer curiosity.
			   <br>
			   <select class="chosen-select" id="q4">
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">

			<div class="jumbotron">
			 
			    It is often difficult for you to relate to other people’s feelings.
			    <br>
			    <select class="chosen-select" id="q5">
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">

			<div class="jumbotron">
			 
			    In a discussion, truth should be more important than people’s sensitivities.
			    <br>
			    <select class="chosen-select" id="q6">
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">

			<div class="jumbotron">
			 
			    You rarely get carried away by fantasies and ideas.
			    <br>
			    <select class="chosen-select" id="q7">
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">

			<div class="jumbotron">
			 
			    You think that everyone’s views should be respected regardless of whether they are supported by facts
			    or not.
			    <br>
			    <select class="chosen-select" id="q8">
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">

			<div class="jumbotron">
			 
			   You feel more energetic after spending time with a group of people.
			   <br>
			   <select class="chosen-select" id="q9">
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4">
			<div class="jumbotron">
			   People can rarely upset you.
			   <br>
			   <select class="chosen-select" id="q10">
			      <option></option>
			      <option value="1">1 (Strongly Disagree)</option>
			      <option value="2">2</option>
			      <option value="3">3</option>
			      <option value="4">4</option>
			      <option value="5">5 (Strongly Agree)</option>
			    </select>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-5"></div>
		<div class="col-md-3">
		
			<button type="button" id="surveySubmit" class="btn btn-danger"><h1>submit</h1></button>
		</div>

	</div>


<!-- Modal -->
<div id="myModal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p id="match"></p>
		<img id="photo">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Add Comment -->

<script type="text/javascript">
	var userData = {
		name: null,
		image: null,
		score:[]

	}

	
	
		$("#surveySubmit").on("click", function (argument) {
			userData.name = $("#name").val()

			userData.image = $("#img").val()


			userData.score  = [
				parseInt($("#q1").val()),
				
				parseInt($("#q2").val()),
				
				parseInt($("#q3").val()),
				
				parseInt($("#q4").val()),
				
				parseInt($("#q5").val()),
				
				parseInt($("#q6").val()),
				
				parseInt($("#q7").val()),
				
				parseInt($("#q8").val()),
				
				parseInt($("#q9").val()),
				
				parseInt($("#q10").val())
			]
			console.log(userData);
			// $.post("/api/friends", userData, function(data) {

			// })
	
			if(ValidURL(userData.image) && userData.score.length === 10 && !userData.score.includes(NaN) && !userData.score.includes(null)){
				console.log("we can do our post now")
				// clear / rest the form
				postUserInput(userData);
			}else{
				if(!ValidURL(userData.image)){
					console.log("Please enter valid URL.");
				}else if(userData.score.includes(NaN) || userData.score.includes(null)){
					console.log("Please answer all the questions.");
				}
			}
		})

		function postUserInput(newUser){
			$.post("/api/friends", newUser, function(match){
				// reset the values of newFriend
			console.log("================1",match);

				userData = {
					name: null,
					image: null,
					score: []
				}
				renderHTML(match);
			}); 
		}

		function ValidURL(str) {
		  var regex = /(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;
		  if(!regex .test(str)) {
		    //
		    return false;
		  } else {
		    return true;
		  }
		}

		function renderHTML(match){
			// empty modal body
			console.log("================",match);
			// $(".modal").empty()
			console.log(match.photo);


  			$('#match').html(match.name);
	    	$("#photo").attr("src", match.photo);
	    	// Pop open the modal dialog
  			$('#myModal').modal("show");			


		}
		
	</script>
</body>
</html>